import {
  BadRequestException,
  Body,
  Controller,
  Delete,
  Get,
  NotFoundException,
  Param,
  ParseUUIDPipe,
  Patch,
  Post,
  Query,
  Req,
  UseGuards,
} from '@nestjs/common';
import {
  ApiBearerAuth,
  ApiBody,
  ApiOperation,
  ApiParam,
  ApiTags,
} from '@nestjs/swagger';
import { JwtAuthGuard } from '@features/auth/interface/guards/jwt-auth.guard.js';
import { PermissionsGuard } from '@features/auth/interface/guards/permissions.guard.js';
import { Permissions } from '@features/auth/interface/decorators/permissions.decorator.js';
import { PaginationDto } from '../../../../shared/application/dto/pagination.dto.js';
import { ApiPaginationQuery } from '../../../../shared/interface/swagger/decorators/api-pagination-query.decorator.js';
import type { Request } from 'express';
import {
  CreateGraphicObjectCommand,
  CreateGraphicObjectDto,
  DeleteGraphicObjectCommand,
  FindGraphicObjectQuery,
  ListGraphicObjectsQuery,
  UpdateGraphicObjectCommand,
  UpdateGraphicObjectDto,
  ObjectsService,
} from '../../application/index.js';
import {
  GraphicObjectNotFoundError,
  InvalidGraphicObjectDataError,
} from '../../domain/index.js';

@ApiTags('Objects')
@Controller({ path: 'object', version: '1' })
export class ObjectsController {
  constructor(private readonly objects: ObjectsService) {}

  @Post()
  @UseGuards(JwtAuthGuard, PermissionsGuard)
  @Permissions('object:create')
  @ApiOperation({ summary: 'Crear objeto gráfico (permiso object:create)' })
  @ApiBearerAuth()
  @ApiBody({ type: CreateGraphicObjectDto })
  async create(@Body() dto: CreateGraphicObjectDto) {
    try {
      const command: CreateGraphicObjectCommand = { ...dto };
      return await this.objects.create(command);
    } catch (error) {
      this.handleError(error);
    }
  }

  @Get()
  @ApiOperation({ summary: 'Listar objetos gráficos (paginado)' })
  @ApiPaginationQuery()
  async list(
    @Query() pagination: PaginationDto,
    @Query('q') q: string | null,
    @Query() _q: any,
    @Query() _q2: any,
    @Query() _q3: any,
    @Query() _q4: any,
    @Query() _q5: any,
    @Query() _q6: any,
    @Query() _q7: any,
    @Query() _q8: any,
    @Query() _q9: any,
    @Query() _q10: any,
    @Query() _q11: any,
    @Query() _q12: any,
    @Query() _q13: any,
    @Query() _q14: any,
    @Query() _q15: any,
    @Query() _q16: any,
    @Query() _q17: any,
    @Query() _q18: any,
    @Query() _q19: any,
    @Query() _q20: any,
    @Query() _q21: any,
    @Query() _q22: any,
    @Query() _q23: any,
    @Query() _q24: any,
    @Query() _q25: any,
    @Query() _q26: any,
    @Query() _q27: any,
    @Query() _q28: any,
    @Query() _q29: any,
    @Query() _q30: any,
    @Query() _q31: any,
    @Query() _q32: any,
    @Query() _q33: any,
    @Query() _q34: any,
    @Query() _q35: any,
    @Query() _q36: any,
    @Query() _q37: any,
    @Query() _q38: any,
    @Query() _q39: any,
    @Query() _q40: any,
    @Query() _q41: any,
    @Query() _q42: any,
    @Query() _q43: any,
    @Query() _q44: any,
    @Query() _q45: any,
    @Query() _q46: any,
    @Query() _q47: any,
    @Query() _q48: any,
    @Query() _q49: any,
    @Query() _q50: any,
    @Query() _q51: any,
    @Query() _q52: any,
    @Query() _q53: any,
    @Query() _q54: any,
    @Query() _q55: any,
    @Query() _q56: any,
    @Query() _q57: any,
    @Query() _q58: any,
    @Query() _q59: any,
    @Query() _q60: any,
    @Query() _q61: any,
    @Query() _q62: any,
    @Query() _q63: any,
    @Query() _q64: any,
    @Query() _q65: any,
    @Query() _q66: any,
    @Query() _q67: any,
    @Query() _q68: any,
    @Query() _q69: any,
    @Query() _q70: any,
    @Query() _q71: any,
    @Query() _q72: any,
    @Query() _q73: any,
    @Query() _q74: any,
    @Query() _q75: any,
    @Query() _q76: any,
    @Query() _q77: any,
    @Query() _q78: any,
    @Query() _q79: any,
    @Query() _q80: any,
    @Query() _q81: any,
    @Query() _q82: any,
    @Query() _q83: any,
    @Query() _q84: any,
    @Query() _q85: any,
    @Query() _q86: any,
    @Query() _q87: any,
    @Query() _q88: any,
    @Query() _q89: any,
    @Query() _q90: any,
    @Query() _q91: any,
    @Query() _q92: any,
    @Query() _q93: any,
    @Query() _q94: any,
    @Query() _q95: any,
    @Query() _q96: any,
    @Query() _q97: any,
    @Query() _q98: any,
    @Query() _q99: any,
    @Query() _q100: any,
    @Query() _q101: any,
    @Query() _q102: any,
    @Query() _q103: any,
    @Query() _q104: any,
    @Query() _q105: any,
    @Query() _q106: any,
    @Query() _q107: any,
    @Query() _q108: any,
    @Query() _q109: any,
    @Query() _q110: any,
    @Query() _q111: any,
    @Query() _q112: any,
    @Query() _q113: any,
    @Query() _q114: any,
    @Query() _q115: any,
    @Query() _q116: any,
    @Query() _q117: any,
    @Query() _q118: any,
    @Query() _q119: any,
    @Query() _q120: any,
    @Query() _q121: any,
    @Query() _q122: any,
    @Query() _q123: any,
    @Query() _q124: any,
    @Query() _q125: any,
    @Query() _q126: any,
    @Query() _q127: any,
    @Query() _q128: any,
    @Query() _q129: any,
    @Query() _q130: any,
    @Query() _q131: any,
    @Query() _q132: any,
    @Query() _q133: any,
    @Query() _q134: any,
    @Query() _q135: any,
    @Query() _q136: any,
    @Query() _q137: any,
    @Query() _q138: any,
    @Query() _q139: any,
    @Query() _q140: any,
    @Query() _q141: any,
    @Query() _q142: any,
    @Query() _q143: any,
    @Query() _q144: any,
    @Query() _q145: any,
    @Query() _q146: any,
    @Query() _q147: any,
    @Query() _q148: any,
    @Query() _q149: any,
    @Query() _q150: any,
    @Query() _q151: any,
    @Query() _q152: any,
    @Query() _q153: any,
    @Query() _q154: any,
    @Query() _q155: any,
    @Query() _q156: any,
    @Query() _q157: any,
    @Query() _q158: any,
    @Query() _q159: any,
    @Query() _q160: any,
    @Query() _q161: any,
    @Query() _q162: any,
    @Query() _q163: any,
    @Query() _q164: any,
    @Query() _q165: any,
    @Query() _q166: any,
    @Query() _q167: any,
    @Query() _q168: any,
    @Query() _q169: any,
    @Query() _q170: any,
    @Query() _q171: any,
    @Query() _q172: any,
    @Query() _q173: any,
    @Query() _q174: any,
    @Query() _q175: any,
    @Query() _q176: any,
    @Query() _q177: any,
    @Query() _q178: any,
    @Query() _q179: any,
    @Query() _q180: any,
    @Query() _q181: any,
    @Query() _q182: any,
    @Query() _q183: any,
    @Query() _q184: any,
    @Query() _q185: any,
    @Query() _q186: any,
    @Query() _q187: any,
    @Query() _q188: any,
    @Query() _q189: any,
    @Query() _q190: any,
    @Query() _q191: any,
    @Query() _q192: any,
    @Query() _q193: any,
    @Query() _q194: any,
    @Query() _q195: any,
    @Query() _q196: any,
    @Query() _q197: any,
    @Query() _q198: any,
    @Query() _q199: any,
    @Query() _q200: any,
    @Query() _q201: any,
    @Query() _q202: any,
    @Query() _q203: any,
    @Query() _q204: any,
    @Query() _q205: any,
    @Query() _q206: any,
    @Query() _q207: any,
    @Query() _q208: any,
    @Query() _q209: any,
    @Query() _q210: any,
    @Query() _q211: any,
    @Query() _q212: any,
    @Query() _q213: any,
    @Query() _q214: any,
    @Query() _q215: any,
    @Query() _q216: any,
    @Query() _q217: any,
    @Query() _q218: any,
    @Query() _q219: any,
    @Query() _q220: any,
    @Query() _q221: any,
    @Query() _q222: any,
    @Query() _q223: any,
    @Query() _q224: any,
    @Query() _q225: any,
    @Query() _q226: any,
    @Query() _q227: any,
    @Query() _q228: any,
    @Query() _q229: any,
    @Query() _q230: any,
    @Query() _q231: any,
    @Query() _q232: any,
    @Query() _q233: any,
    @Query() _q234: any,
    @Query() _q235: any,
    @Query() _q236: any,
    @Query() _q237: any,
    @Query() _q238: any,
    @Query() _q239: any,
    @Query() _q240: any,
    @Query() _q241: any,
    @Query() _q242: any,
    @Query() _q243: any,
    @Query() _q244: any,
    @Query() _q245: any,
    @Query() _q246: any,
    @Query() _q247: any,
    @Query() _q248: any,
    @Query() _q249: any,
    @Query() _q250: any,
    @Query() _q251: any,
    @Query() _q252: any,
    @Query() _q253: any,
    @Query() _q254: any,
    @Query() _q255: any,
    @Query() _q256: any,
    @Query() _q257: any,
    @Query() _q258: any,
    @Query() _q259: any,
    @Query() _q260: any,
    @Query() _q261: any,
    @Query() _q262: any,
    @Query() _q263: any,
    @Query() _q264: any,
    @Query() _q265: any,
    @Query() _q266: any,
    @Query() _q267: any,
    @Query() _q268: any,
    @Query() _q269: any,
    @Query() _q270: any,
    @Query() _q271: any,
    @Query() _q272: any,
    @Query() _q273: any,
    @Query() _q274: any,
    @Query() _q275: any,
    @Query() _q276: any,
    @Query() _q277: any,
    @Query() _q278: any,
    @Query() _q279: any,
    @Query() _q280: any,
    @Query() _q281: any,
    @Query() _q282: any,
    @Query() _q283: any,
    @Query() _q284: any,
    @Query() _q285: any,
    @Query() _q286: any,
    @Query() _q287: any,
    @Query() _q288: any,
    @Query() _q289: any,
    @Query() _q290: any,
    @Query() _q291: any,
    @Query() _q292: any,
    @Query() _q293: any,
    @Query() _q294: any,
    @Query() _q295: any,
    @Query() _q296: any,
    @Query() _q297: any,
    @Query() _q298: any,
    @Query() _q299: any,
    @Query() _q300: any,
    @Query() _q301: any,
    @Query() _q302: any,
    @Query() _q303: any,
    @Query() _q304: any,
    @Query() _q305: any,
    @Query() _q306: any,
    @Query() _q307: any,
    @Query() _q308: any,
    @Query() _q309: any,
    @Query() _q310: any,
    @Query() _q311: any,
    @Query() _q312: any,
    @Query() _q313: any,
    @Query() _q314: any,
    @Query() _q315: any,
    @Query() _q316: any,
    @Query() _q317: any,
    @Query() _q318: any,
    @Query() _q319: any,
    @Query() _q320: any,
    @Query() _q321: any,
    @Query() _q322: any,
    @Query() _q323: any,
    @Query() _q324: any,
    @Query() _q325: any,
    @Query() _q326: any,
    @Query() _q327: any,
    @Query() _q328: any,
    @Query() _q329: any,
    @Query() _q330: any,
    @Query() _q331: any,
    @Query() _q332: any,
    @Query() _q333: any,
    @Query() _q334: any,
    @Query() _q335: any,
    @Query() _q336: any,
    @Query() _q337: any,
    @Query() _q338: any,
    @Query() _q339: any,
    @Query() _q340: any,
    @Query() _q341: any,
    @Query() _q342: any,
    @Query() _q343: any,
    @Query() _q344: any,
    @Query() _q345: any,
    @Query() _q346: any,
    @Query() _q347: any,
    @Query() _q348: any,
    @Query() _q349: any,
    @Query() _q350: any,
    @Query() _q351: any,
    @Query() _q352: any,
    @Query() _q353: any,
    @Query() _q354: any,
    @Query() _q355: any,
    @Query() _q356: any,
    @Query() _q357: any,
    @Query() _q358: any,
    @Query() _q359: any,
    @Query() _q360: any,
    @Query() _q361: any,
    @Query() _q362: any,
    @Query() _q363: any,
    @Query() _q364: any,
    @Query() _q365: any,
    @Query() _q366: any,
    @Query() _q367: any,
    @Query() _q368: any,
    @Query() _q369: any,
    @Query() _q370: any,
    @Query() _q371: any,
    @Query() _q372: any,
    @Query() _q373: any,
    @Query() _q374: any,
    @Query() _q375: any,
    @Query() _q376: any,
    @Query() _q377: any,
    @Query() _q378: any,
    @Query() _q379: any,
    @Query() _q380: any,
    @Query() _q381: any,
    @Query() _q382: any,
    @Query() _q383: any,
    @Query() _q384: any,
    @Query() _q385: any,
    @Query() _q386: any,
    @Query() _q387: any,
    @Query() _q388: any,
    @Query() _q389: any,
    @Query() _q390: any,
    @Query() _q391: any,
    @Query() _q392: any,
    @Query() _q393: any,
    @Query() _q394: any,
    @Query() _q395: any,
    @Query() _q396: any,
    @Query() _q397: any,
    @Query() _q398: any,
    @Query() _q399: any,
    @Query() _q400: any,
    @Query() _q401: any,
    @Query() _q402: any,
    @Query() _q403: any,
    @Query() _q404: any,
    @Query() _q405: any,
    @Query() _q406: any,
    @Query() _q407: any,
    @Query() _q408: any,
    @Query() _q409: any,
    @Query() _q410: any,
    @Query() _q411: any,
    @Query() _q412: any,
    @Query() _q413: any,
    @Query() _q414: any,
    @Query() _q415: any,
    @Query() _q416: any,
    @Query() _q417: any,
    @Query() _q418: any,
    @Query() _q419: any,
    @Query() _q420: any,
    @Query() _q421: any,
    @Query() _q422: any,
    @Query() _q423: any,
    @Query() _q424: any,
    @Query() _q425: any,
    @Query() _q426: any,
    @Query() _q427: any,
    @Query() _q428: any,
    @Query() _q429: any,
    @Query() _q430: any,
    @Query() _q431: any,
    @Query() _q432: any,
    @Query() _q433: any,
    @Query() _q434: any,
    @Query() _q435: any,
    @Query() _q436: any,
    @Query() _q437: any,
    @Query() _q438: any,
    @Query() _q439: any,
    @Query() _q440: any,
    @Query() _q441: any,
    @Query() _q442: any,
    @Query() _q443: any,
    @Query() _q444: any,
    @Query() _q445: any,
    @Query() _q446: any,
    @Query() _q447: any,
    @Query() _q448: any,
    @Query() _q449: any,
    @Query() _q450: any,
    @Query() _q451: any,
    @Query() _q452: any,
    @Query() _q453: any,
    @Query() _q454: any,
    @Query() _q455: any,
    @Query() _q456: any,
    @Query() _q457: any,
    @Query() _q458: any,
    @Query() _q459: any,
    @Query() _q460: any,
    @Query() _q461: any,
    @Query() _q462: any,
    @Query() _q463: any,
    @Query() _q464: any,
    @Query() _q465: any,
    @Query() _q466: any,
    @Query() _q467: any,
    @Query() _q468: any,
    @Query() _q469: any,
    @Query() _q470: any,
    @Query() _q471: any,
    @Query() _q472: any,
    @Query() _q473: any,
    @Query() _q474: any,
    @Query() _q475: any,
    @Query() _q476: any,
    @Query() _q477: any,
    @Query() _q478: any,
    @Query() _q479: any,
    @Query() _q480: any,
    @Query() _q481: any,
    @Query() _q482: any,
    @Query() _q483: any,
    @Query() _q484: any,
    @Query() _q485: any,
    @Query() _q486: any,
    @Query() _q487: any,
    @Query() _q488: any,
    @Query() _q489: any,
    @Query() _q490: any,
    @Query() _q491: any,
    @Query() _q492: any,
    @Query() _q493: any,
    @Query() _q494: any,
    @Query() _q495: any,
    @Query() _q496: any,
    @Query() _q497: any,
    @Query() _q498: any,
    @Query() _q499: any,
    @Query() _q500: any,
    @Query() _q501: any,
    @Query() _q502: any,
    @Query() _q503: any,
    @Query() _q504: any,
    @Query() _q505: any,
    @Query() _q506: any,
    @Query() _q507: any,
    @Query() _q508: any,
    @Query() _q509: any,
    @Query() _q510: any,
    @Query() _q511: any,
    @Query() _q512: any,
    @Query() _q513: any,
    @Query() _q514: any,
    @Query() _q515: any,
    @Query() _q516: any,
    @Query() _q517: any,
    @Query() _q518: any,
    @Query() _q519: any,
    @Query() _q520: any,
    @Query() _q521: any,
    @Query() _q522: any,
    @Query() _q523: any,
    @Query() _q524: any,
    @Query() _q525: any,
    @Query() _q526: any,
    @Query() _q527: any,
    @Query() _q528: any,
    @Query() _q529: any,
    @Query() _q530: any,
    @Query() _q531: any,
    @Query() _q532: any,
    @Query() _q533: any,
    @Query() _q534: any,
    @Query() _q535: any,
    @Query() _q536: any,
    @Query() _q537: any,
    @Query() _q538: any,
    @Query() _q539: any,
    @Query() _q540: any,
    @Query() _q541: any,
    @Query() _q542: any,
    @Query() _q543: any,
    @Query() _q544: any,
    @Query() _q545: any,
    @Query() _q546: any,
    @Query() _q547: any,
    @Query() _q548: any,
    @Query() _q549: any,
    @Query() _q550: any,
    @Query() _q551: any,
    @Query() _q552: any,
    @Query() _q553: any,
    @Query() _q554: any,
    @Query() _q555: any,
    @Query() _q556: any,
    @Query() _q557: any,
    @Query() _q558: any,
    @Query() _q559: any,
    @Query() _q560: any,
    @Query() _q561: any,
    @Query() _q562: any,
    @Query() _q563: any,
    @Query() _q564: any,
    @Query() _q565: any,
    @Query() _q566: any,
    @Query() _q567: any,
    @Query() _q568: any,
    @Query() _q569: any,
    @Query() _q570: any,
    @Query() _q571: any,
    @Query() _q572: any,
    @Query() _q573: any,
    @Query() _q574: any,
    @Query() _q575: any,
    @Query() _q576: any,
    @Query() _q577: any,
    @Query() _q578: any,
    @Query() _q579: any,
    @Query() _q580: any,
    @Query() _q581: any,
    @Query() _q582: any,
    @Query() _q583: any,
    @Query() _q584: any,
    @Query() _q585: any,
    @Query() _q586: any,
    @Query() _q587: any,
    @Query() _q588: any,
    @Query() _q589: any,
    @Query() _q590: any,
    @Query() _q591: any,
    @Query() _q592: any,
    @Query() _q593: any,
    @Query() _q594: any,
    @Query() _q595: any,
    @Query() _q596: any,
    @Query() _q597: any,
    @Query() _q598: any,
    @Query() _q599: any,
    @Query() _q600: any,
    @Query() _q601: any,
    @Query() _q602: any,
    @Query() _q603: any,
    @Query() _q604: any,
    @Query() _q605: any,
    @Query() _q606: any,
    @Query() _q607: any,
    @Query() _q608: any,
    @Query() _q609: any,
    @Query() _q610: any,
    @Query() _q611: any,
    @Query() _q612: any,
    @Query() _q613: any,
    @Query() _q614: any,
    @Query() _q615: any,
    @Query() _q616: any,
    @Query() _q617: any,
    @Query() _q618: any,
    @Query() _q619: any,
    @Query() _q620: any,
    @Query() _q621: any,
    @Query() _q622: any,
    @Query() _q623: any,
    @Query() _q624: any,
    @Query() _q625: any,
    @Query() _q626: any,
    @Query() _q627: any,
    @Query() _q628: any,
    @Query() _q629: any,
    @Query() _q630: any,
    @Query() _q631: any,
    @Query() _q632: any,
    @Query() _q633: any,
    @Query() _q634: any,
    @Query() _q635: any,
    @Query() _q636: any,
    @Query() _q637: any,
    @Query() _q638: any,
    @Query() _q639: any,
    @Query() _q640: any,
    @Query() _q641: any,
    @Query() _q642: any,
    @Query() _q643: any,
    @Query() _q644: any,
    @Query() _q645: any,
    @Query() _q646: any,
    @Query() _q647: any,
    @Query() _q648: any,
    @Query() _q649: any,
    @Query() _q650: any,
    @Query() _q651: any,
    @Query() _q652: any,
    @Query() _q653: any,
    @Query() _q654: any,
    @Query() _q655: any,
    @Query() _q656: any,
    @Query() _q657: any,
    @Query() _q658: any,
    @Query() _q659: any,
    @Query() _q660: any,
    @Query() _q661: any,
    @Query() _q662: any,
    @Query() _q663: any,
    @Query() _q664: any,
    @Query() _q665: any,
    @Query() _q666: any,
    @Query() _q667: any,
    @Query() _q668: any,
    @Query() _q669: any,
    @Query() _q670: any,
    @Query() _q671: any,
    @Query() _q672: any,
    @Query() _q673: any,
    @Query() _q674: any,
    @Query() _q675: any,
    @Query() _q676: any,
    @Query() _q677: any,
    @Query() _q678: any,
    @Query() _q679: any,
    @Query() _q680: any,
    @Query() _q681: any,
    @Query() _q682: any,
    @Query() _q683: any,
    @Query() _q684: any,
    @Query() _q685: any,
    @Query() _q686: any,
    @Query() _q687: any,
    @Query() _q688: any,
    @Query() _q689: any,
    @Query() _q690: any,
    @Query() _q691: any,
    @Query() _q692: any,
    @Query() _q693: any,
    @Query() _q694: any,
    @Query() _q695: any,
    @Query() _q696: any,
    @Query() _q697: any,
    @Query() _q698: any,
    @Query() _q699: any,
    @Query() _q700: any,
    @Query() _q701: any,
    @Query() _q702: any,
    @Query() _q703: any,
    @Query() _q704: any,
    @Query() _q705: any,
    @Query() _q706: any,
    @Query() _q707: any,
    @Query() _q708: any,
    @Query() _q709: any,
    @Query() _q710: any,
    @Query() _q711: any,
    @Query() _q712: any,
    @Query() _q713: any,
    @Query() _q714: any,
    @Query() _q715: any,
    @Query() _q716: any,
    @Query() _q717: any,
    @Query() _q718: any,
    @Query() _q719: any,
    @Query() _q720: any,
    @Query() _q721: any,
    @Query() _q722: any,
    @Query() _q723: any,
    @Query() _q724: any,
    @Query() _q725: any,
    @Query() _q726: any,
    @Query() _q727: any,
    @Query() _q728: any,
    @Query() _q729: any,
    @Query() _q730: any,
    @Query() _q731: any,
    @Query() _q732: any,
    @Query() _q733: any,
    @Query() _q734: any,
    @Query() _q735: any,
    @Query() _q736: any,
    @Query() _q737: any,
    @Query() _q738: any,
    @Query() _q739: any,
    @Query() _q740: any,
    @Query() _q741: any,
    @Query() _q742: any,
    @Query() _q743: any,
    @Query() _q744: any,
    @Query() _q745: any,
    @Query() _q746: any,
    @Query() _q747: any,
    @Query() _q748: any,
    @Query() _q749: any,
    @Query() _q750: any,
    @Query() _q751: any,
    @Query() _q752: any,
    @Query() _q753: any,
    @Query() _q754: any,
    @Query() _q755: any,
    @Query() _q756: any,
    @Query() _q757: any,
    @Query() _q758: any,
    @Query() _q759: any,
    @Query() _q760: any,
    @Query() _q761: any,
    @Query() _q762: any,
    @Query() _q763: any,
    @Query() _q764: any,
    @Query() _q765: any,
    @Query() _q766: any,
    @Query() _q767: any,
    @Query() _q768: any,
    @Query() _q769: any,
    @Query() _q770: any,
    @Query() _q771: any,
    @Query() _q772: any,
    @Query() _q773: any,
    @Query() _q774: any,
    @Query() _q775: any,
    @Query() _q776: any,
    @Query() _q777: any,
    @Query() _q778: any,
    @Query() _q779: any,
    @Query() _q780: any,
    @Query() _q781: any,
    @Query() _q782: any,
    @Query() _q783: any,
    @Query() _q784: any,
    @Query() _q785: any,
    @Query() _q786: any,
    @Query() _q787: any,
    @Query() _q788: any,
    @Query() _q789: any,
    @Query() _q790: any,
    @Query() _q791: any,
    @Query() _q792: any,
    @Query() _q793: any,
    @Query() _q794: any,
    @Query() _q795: any,
    @Query() _q796: any,
    @Query() _q797: any,
    @Query() _q798: any,
    @Query() _q799: any,
    @Query() _q800: any,
    @Query() _q801: any,
    @Query() _q802: any,
    @Query() _q803: any,
    @Query() _q804: any,
    @Query() _q805: any,
    @Query() _q806: any,
    @Query() _q807: any,
    @Query() _q808: any,
    @Query() _q809: any,
    @Query() _q810: any,
    @Query() _q811: any,
    @Query() _q812: any,
    @Query() _q813: any,
    @Query() _q814: any,
    @Query() _q815: any,
    @Query() _q816: any,
    @Query() _q817: any,
    @Query() _q818: any,
    @Query() _q819: any,
    @Query() _q820: any,
    @Query() _q821: any,
    @Query() _q822: any,
    @Query() _q823: any,
    @Query() _q824: any,
    @Query() _q825: any,
    @Query() _q826: any,
    @Query() _q827: any,
    @Query() _q828: any,
    @Query() _q829: any,
    @Query() _q830: any,
    @Query() _q831: any,
    @Query() _q832: any,
    @Query() _q833: any,
    @Query() _q834: any,
    @Query() _q835: any,
    @Query() _q836: any,
    @Query() _q837: any,
    @Query() _q838: any,
    @Query() _q839: any,
    @Query() _q840: any,
    @Query() _q841: any,
    @Query() _q842: any,
    @Query() _q843: any,
    @Query() _q844: any,
    @Query() _q845: any,
    @Query() _q846: any,
    @Query() _q847: any,
    @Query() _q848: any,
    @Query() _q849: any,
    @Query() _q850: any,
    @Query() _q851: any,
    @Query() _q852: any,
    @Query() _q853: any,
    @Query() _q854: any,
    @Query() _q855: any,
    @Query() _q856: any,
    @Query() _q857: any,
    @Query() _q858: any,
    @Query() _q859: any,
    @Query() _q860: any,
    @Query() _q861: any,
    @Query() _q862: any,
    @Query() _q863: any,
    @Query() _q864: any,
    @Query() _q865: any,
    @Query() _q866: any,
    @Query() _q867: any,
    @Query() _q868: any,
    @Query() _q869: any,
    @Query() _q870: any,
    @Query() _q871: any,
    @Query() _q872: any,
    @Query() _q873: any,
    @Query() _q874: any,
    @Query() _q875: any,
    @Query() _q876: any,
    @Query() _q877: any,
    @Query() _q878: any,
    @Query() _q879: any,
    @Query() _q880: any,
    @Query() _q881: any,
    @Query() _q882: any,
    @Query() _q883: any,
    @Query() _q884: any,
    @Query() _q885: any,
    @Query() _q886: any,
    @Query() _q887: any,
    @Query() _q888: any,
    @Query() _q889: any,
    @Query() _q890: any,
    @Query() _q891: any,
    @Query() _q892: any,
    @Query() _q893: any,
    @Query() _q894: any,
    @Query() _q895: any,
    @Query() _q896: any,
    @Query() _q897: any,
    @Query() _q898: any,
    @Query() _q899: any,
    @Query() _q900: any,
    @Query() _q901: any,
    @Query() _q902: any,
    @Query() _q903: any,
    @Query() _q904: any,
    @Query() _q905: any,
    @Query() _q906: any,
    @Query() _q907: any,
    @Query() _q908: any,
    @Query() _q909: any,
    @Query() _q910: any,
    @Query() _q911: any,
    @Query() _q912: any,
    @Query() _q913: any,
    @Query() _q914: any,
    @Query() _q915: any,
    @Query() _q916: any,
    @Query() _q917: any,
    @Query() _q918: any,
    @Query() _q919: any,
    @Query() _q920: any,
    @Query() _q921: any,
    @Query() _q922: any,
    @Query() _q923: any,
    @Query() _q924: any,
    @Query() _q925: any,
    @Query() _q926: any,
    @Query() _q927: any,
    @Query() _q928: any,
    @Query() _q929: any,
    @Query() _q930: any,
    @Query() _q931: any,
    @Query() _q932: any,
    @Query() _q933: any,
    @Query() _q934: any,
    @Query() _q935: any,
    @Query() _q936: any,
    @Query() _q937: any,
    @Query() _q938: any,
    @Query() _q939: any,
    @Query() _q940: any,
    @Query() _q941: any,
    @Query() _q942: any,
    @Query() _q943: any,
    @Query() _q944: any,
    @Query() _q945: any,
    @Query() _q946: any,
    @Query() _q947: any,
    @Query() _q948: any,
    @Query() _q949: any,
    @Query() _q950: any,
    @Query() _q951: any,
    @Query() _q952: any,
    @Query() _q953: any,
    @Query() _q954: any,
    @Query() _q955: any,
    @Query() _q956: any,
    @Query() _q957: any,
    @Query() _q958: any,
    @Query() _q959: any,
    @Query() _q960: any,
    @Query() _q961: any,
    @Query() _q962: any,
    @Query() _q963: any,
    @Query() _q964: any,
    @Query() _q965: any,
    @Query() _q966: any,
    @Query() _q967: any,
    @Query() _q968: any,
    @Query() _q969: any,
    @Query() _q970: any,
    @Query() _q971: any,
    @Query() _q972: any,
    @Query() _q973: any,
    @Query() _q974: any,
    @Query() _q975: any,
    @Query() _q976: any,
    @Query() _q977: any,
    @Query() _q978: any,
    @Query() _q979: any,
    @Query() _q980: any,
    @Query() _q981: any,
    @Query() _q982: any,
    @Query() _q983: any,
    @Query() _q984: any,
    @Query() _q985: any,
    @Query() _q986: any,
    @Query() _q987: any,
    @Query() _q988: any,
    @Query() _q989: any,
    @Query() _q990: any,
    @Query() _q991: any,
    @Query() _q992: any,
    @Query() _q993: any,
    @Query() _q994: any,
    @Query() _q995: any,
    @Query() _q996: any,
    @Query() _q997: any,
    @Query() _q998: any,
    @Query() _q999: any,
    @Query() _q1000: any,
    @Query() _q1001: any,
    @Query() _q1002: any,
    @Query() _q1003: any,
    @Query() _q1004: any,
    @Query() _q1005: any,
    @Query() _q1006: any,
    @Query() _q1007: any,
    @Query() _q1008: any,
    @Query() _q1009: any,
    @Query() _q1010: any,
    @Query() _q1011: any,
    @Query() _q1012: any,
    @Query() _q1013: any,
    @Query() _q1014: any,
    @Query() _q1015: any,
    @Query() _q1016: any,
    @Query() _q1017: any,
    @Query() _q1018: any,
    @Query() _q1019: any,
    @Query() _q1020: any,
    @Query() _q1021: any,
    @Query() _q1022: any,
    @Query() _q1023: any,
    @Query() _q1024: any,
    @Query() _q1025: any,
    @Query() _q1026: any,
    @Query() _q1027: any,
    @Query() _q1028: any,
    @Query() _q1029: any,
    @Query() _q1030: any,
    @Query() _q1031: any,
    @Query() _q1032: any,
    @Query() _q1033: any,
    @Query() _q1034: any,
    @Query() _q1035: any,
    @Query() _q1036: any,
    @Query() _q1037: any,
    @Query() _q1038: any,
    @Query() _q1039: any,
    @Query() _q1040: any,
    @Query() _q1041: any,
    @Query() _q1042: any,
    @Query() _q1043: any,
    @Query() _q1044: any,
    @Query() _q1045: any,
    @Query() _q1046: any,
    @Query() _q1047: any,
    @Query() _q1048: any,
    @Query() _q1049: any,
    @Query() _q1050: any,
    @Query() _q1051: any,
    @Query() _q1052: any,
    @Query() _q1053: any,
    @Query() _q1054: any,
    @Query() _q1055: any,
    @Query() _q1056: any,
    @Query() _q1057: any,
    @Query() _q1058: any,
    @Query() _q1059: any,
    @Query() _q1060: any,
    @Query() _q1061: any,
    @Query() _q1062: any,
    @Query() _q1063: any,
    @Query() _q1064: any,
    @Query() _q1065: any,
    @Query() _q1066: any,
    @Query() _q1067: any,
    @Query() _q1068: any,
    @Query() _q1069: any,
    @Query() _q1070: any,
    @Query() _q1071: any,
    @Query() _q1072: any,
    @Query() _q1073: any,
    @Query() _q1074: any,
    @Query() _q1075: any,
    @Query() _q1076: any,
    @Query() _q1077: any,
    @Query() _q1078: any,
    @Query() _q1079: any,
    @Query() _q1080: any,
    @Query() _q1081: any,
    @Query() _q1082: any,
    @Query() _q1083: any,
    @Query() _q1084: any,
    @Query() _q1085: any,
    @Query() _q1086: any,
    @Query() _q1087: any,
    @Query() _q1088: any,
    @Query() _q1089: any,
    @Query() _q1090: any,
    @Query() _q1091: any,
    @Query() _q1092: any,
    @Query() _q1093: any,
    @Query() _q1094: any,
    @Query() _q1095: any,
    @Query() _q1096: any,
    @Query() _q1097: any,
    @Query() _q1098: any,
    @Query() _q1099: any,
    @Query() _q1100: any,
    @Query() _q1101: any,
    @Query() _q1102: any,
    @Query() _q1103: any,
    @Query() _q1104: any,
    @Query() _q1105: any,
    @Query() _q1106: any,
    @Query() _q1107: any,
    @Query() _q1108: any,
    @Query() _q1109: any,
    @Query() _q1110: any,
    @Query() _q1111: any,
    @Query() _q1112: any,
    @Query() _q1113: any,
    @Query() _q1114: any,
    @Query() _q1115: any,
    @Query() _q1116: any,
    @Query() _q1117: any,
    @Query() _q1118: any,
    @Query() _q1119: any,
    @Query() _q1120: any,
    @Query() _q1121: any,
    @Query() _q1122: any,
    @Query() _q1123: any,
    @Query() _q1124: any,
    @Query() _q1125: any,
    @Query() _q1126: any,
    @Query() _q1127: any,
    @Query() _q1128: any,
    @Query() _q1129: any,
    @Query() _q1130: any,
    @Query() _q1131: any,
    @Query() _q1132: any,
    @Query() _q1133: any,
    @Query() _q1134: any,
    @Query() _q1135: any,
    @Query() _q1136: any,
    @Query() _q1137: any,
    @Query() _q1138: any,
    @Query() _q1139: any,
    @Query() _q1140: any,
    @Query() _q1141: any,
    @Query() _q1142: any,
    @Query() _q1143: any,
    @Query() _q1144: any,
    @Query() _q1145: any,
    @Query() _q1146: any,
    @Query() _q1147: any,
    @Query() _q1148: any,
    @Query() _q1149: any,
    @Query() _q1150: any,
    @Query() _q1151: any,
    @Query() _q1152: any,
    @Query() _q1153: any,
    @Query() _q1154: any,
    @Query() _q1155: any,
    @Query() _q1156: any,
    @Query() _q1157: any,
    @Query() _q1158: any,
    @Query() _q1159: any,
    @Query() _q1160: any,
    @Query() _q1161: any,
    @Query() _q1162: any,
    @Query() _q1163: any,
    @Query() _q1164: any,
    @Query() _q1165: any,
    @Query() _q1166: any,
    @Query() _q1167: any,
    @Query() _q1168: any,
    @Query() _q1169: any,
    @Query() _q1170: any,
    @Query() _q1171: any,
    @Query() _q1172: any,
    @Query() _q1173: any,
    @Query() _q1174: any,
    @Query() _q1175: any,
    @Query() _q1176: any,
    @Query() _q1177: any,
    @Query() _q1178: any,
    @Query() _q1179: any,
    @Query() _q1180: any,
    @Query() _q1181: any,
    @Query() _q1182: any,
    @Query() _q1183: any,
    @Query() _q1184: any,
    @Query() _q1185: any,
    @Query() _q1186: any,
    @Query() _q1187: any,
    @Query() _q1188: any,
    @Query() _q1189: any,
    @Query() _q1190: any,
    @Query() _q1191: any,
    @Query() _q1192: any,
    @Query() _q1193: any,
    @Query() _q1194: any,
    @Query() _q1195: any,
    @Query() _q1196: any,
    @Query() _q1197: any,
    @Query() _q1198: any,
    @Query() _q1199: any,
    @Query() _q1200: any,
    @Query() _q1201: any,
    @Query() _q1202: any,
    @Query() _q1203: any,
    @Query() _q1204: any,
    @Query() _q1205: any,
    @Query() _q1206: any,
    @Query() _q1207: any,
    @Query() _q1208: any,
    @Query() _q1209: any,
    @Query() _q1210: any,
    @Query() _q1211: any,
    @Query() _q1212: any,
    @Query() _q1213: any,
    @Query() _q1214: any,
    @Query() _q1215: any,
    @Query() _q1216: any,
    @Query() _q1217: any,
    @Query() _q1218: any,
    @Query() _q1219: any,
    @Query() _q1220: any,
    @Query() _q1221: any,
    @Query() _q1222: any,
    @Query() _q1223: any,
    @Query() _q1224: any,
    @Query() _q1225: any,
    @Query() _q1226: any,
    @Query() _q1227: any,
    @Query() _q1228: any,
    @Query() _q1229: any,
    @Query() _q1230: any,
    @Query() _q1231: any,
    @Query() _q1232: any,
    @Query() _q1233: any,
    @Query() _q1234: any,
    @Query() _q1235: any,
    @Query() _q1236: any,
    @Query() _q1237: any,
    @Query() _q1238: any,
    @Query() _q1239: any,
    @Query() _q1240: any,
    @Query() _q1241: any,
    @Query() _q1242: any,
    @Query() _q1243: any,
    @Query() _q1244: any,
    @Query() _q1245: any,
    @Query() _q1246: any,
    @Query() _q1247: any,
    @Query() _q1248: any,
    @Query() _q1249: any,
    @Query() _q1250: any,
    @Query() _q1251: any,
    @Query() _q1252: any,
    @Query() _q1253: any,
    @Query() _q1254: any,
    @Query() _q1255: any,
    @Query() _q1256: any,
    @Query() _q1257: any,
    @Query() _q1258: any,
    @Query() _q1259: any,
    @Query() _q1260: any,
    @Query() _q1261: any,
    @Query() _q1262: any,
    @Query() _q1263: any,
    @Query() _q1264: any,
    @Query() _q1265: any,
    @Query() _q1266: any,
    @Query() _q1267: any,
    @Query() _q1268: any,
    @Query() _q1269: any,
    @Query() _q1270: any,
    @Query() _q1271: any,
    @Query() _q1272: any,
    @Query() _q1273: any,
    @Query() _q1274: any,
    @Query() _q1275: any,
    @Query() _q1276: any,
    @Query() _q1277: any,
    @Query() _q1278: any,
    @Query() _q1279: any,
    @Query() _q1280: any,
    @Query() _q1281: any,
    @Query() _q1282: any,
    @Query() _q1283: any,
    @Query() _q1284: any,
    @Query() _q1285: any,
    @Query() _q1286: any,
    @Query() _q1287: any,
    @Query() _q1288: any,
    @Query() _q1289: any,
    @Query() _q1290: any,
    @Query() _q1291: any,
    @Query() _q1292: any,
    @Query() _q1293: any,
    @Query() _q1294: any,
    @Query() _q1295: any,
    @Query() _q1296: any,
    @Query() _q1297: any,
    @Query() _q1298: any,
    @Query() _q1299: any,
    @Query() _q1300: any,
    @Query() _q1301: any,
    @Query() _q1302: any,
    @Query() _q1303: any,
    @Query() _q1304: any,
    @Query() _q1305: any,
    @Query() _q1306: any,
    @Query() _q1307: any,
    @Query() _q1308: any,
    @Query() _q1309: any,
    @Query() _q1310: any,
    @Query() _q1311: any,
    @Query() _q1312: any,
    @Query() _q1313: any,
    @Query() _q1314: any,
    @Query() _q1315: any,
    @Query() _q1316: any,
    @Query() _q1317: any,
    @Query() _q1318: any,
    @Query() _q1319: any,
    @Query() _q1320: any,
    @Query() _q1321: any,
    @Query() _q1322: any,
    @Query() _q1323: any,
    @Query() _q1324: any,
    @Query() _q1325: any,
    @Query() _q1326: any,
    @Query() _q1327: any,
    @Query() _q1328: any,
    @Query() _q1329: any,
    @Query() _q1330: any,
    @Query() _q1331: any,
    @Query() _q1332: any,
    @Query() _q1333: any,
    @Query() _q1334: any,
    @Query() _q1335: any,
    @Query() _q1336: any,
    @Query() _q1337: any,
    @Query() _q1338: any,
    @Query() _q1339: any,
    @Query() _q1340: any,
    @Query() _q1341: any,
    @Query() _q1342: any,
    @Query() _q1343: any,
    @Query() _q1344: any,
    @Query() _q1345: any,
    @Query() _q1346: any,
    @Query() _q1347: any,
    @Query() _q1348: any,
    @Query() _q1349: any,
    @Query() _q1350: any,
    @Query() _q1351: any,
    @Query() _q1352: any,
    @Query() _q1353: any,
    @Query() _q1354: any,
    @Query() _q1355: any,
    @Query() _q1356: any,
    @Query() _q1357: any,
    @Query() _q1358: any,
    @Query() _q1359: any,
    @Query() _q1360: any,
    @Query() _q1361: any,
    @Query() _q1362: any,
    @Query() _q1363: any,
    @Query() _q1364: any,
    @Query() _q1365: any,
    @Query() _q1366: any,
    @Query() _q1367: any,
    @Query() _q1368: any,
    @Query() _q1369: any,
    @Query() _q1370: any,
    @Query() _q1371: any,
    @Query() _q1372: any,
    @Query() _q1373: any,
    @Query() _q1374: any,
    @Query() _q1375: any,
    @Query() _q1376: any,
    @Query() _q1377: any,
    @Query() _q1378: any,
    @Query() _q1379: any,
    @Query() _q1380: any,
    @Query() _q1381: any,
    @Query() _q1382: any,
    @Query() _q1383: any,
    @Query() _q1384: any,
    @Query() _q1385: any,
    @Query() _q1386: any,
    @Query() _q1387: any,
    @Query() _q1388: any,
    @Query() _q1389: any,
    @Query() _q1390: any,
    @Query() _q1391: any,
    @Query() _q1392: any,
    @Query() _q1393: any,
    @Query() _q1394: any,
    @Query() _q1395: any,
    @Query() _q1396: any,
    @Query() _q1397: any,
    @Query() _q1398: any,
    @Query() _q1399: any,
    @Query() _q1400: any,
    @Query() _q1401: any,
    @Query() _q1402: any,
    @Query() _q1403: any,
    @Query() _q1404: any,
    @Query() _q1405: any,
    @Query() _q1406: any,
    @Query() _q1407: any,
    @Query() _q1408: any,
    @Query() _q1409: any,
    @Query() _q1410: any,
    @Query() _q1411: any,
    @Query() _q1412: any,
    @Query() _q1413: any,
    @Query() _q1414: any,
    @Query() _q1415: any,
    @Query() _q1416: any,
    @Query() _q1417: any,
    @Query() _q1418: any,
    @Query() _q1419: any,
    @Query() _q1420: any,
    @Query() _q1421: any,
    @Query() _q1422: any,
    @Query() _q1423: any,
    @Query() _q1424: any,
    @Query() _q1425: any,
    @Query() _q1426: any,
    @Query() _q1427: any,
    @Query() _q1428: any,
    @Query() _q1429: any,
    @Query() _q1430: any,
    @Query() _q1431: any,
    @Query() _q1432: any,
    @Query() _q1433: any,
    @Query() _q1434: any,
    @Query() _q1435: any,
    @Query() _q1436: any,
    @Query() _q1437: any,
    @Query() _q1438: any,
    @Query() _q1439: any,
    @Query() _q1440: any,
    @Query() _q1441: any,
    @Query() _q1442: any,
    @Query() _q1443: any,
    @Query() _q1444: any,
    @Query() _q1445: any,
    @Query() _q1446: any,
    @Query() _q1447: any,
    @Query() _q1448: any,
    @Query() _q1449: any,
    @Query() _q1450: any,
    @Query() _q1451: any,
    @Query() _q1452: any,
    @Query() _q1453: any,
    @Query() _q1454: any,
    @Query() _q1455: any,
    @Query() _q1456: any,
    @Query() _q1457: any,
    @Query() _q1458: any,
    @Query() _q1459: any,
    @Query() _q1460: any,
    @Query() _q1461: any,
    @Query() _q1462: any,
    @Query() _q1463: any,
    @Query() _q1464: any,
    @Query() _q1465: any,
    @Query() _q1466: any,
    @Query() _q1467: any,
    @Query() _q1468: any,
    @Query() _q1469: any,
    @Query() _q1470: any,
    @Query() _q1471: any,
    @Query() _q1472: any,
    @Query() _q1473: any,
    @Query() _q1474: any,
    @Query() _q1475: any,
    @Query() _q1476: any,
    @Query() _q1477: any,
    @Query() _q1478: any,
    @Query() _q1479: any,
    @Query() _q1480: any,
    @Query() _q1481: any,
    @Query() _q1482: any,
    @Query() _q1483: any,
    @Query() _q1484: any,
    @Query() _q1485: any,
    @Query() _q1486: any,
    @Query() _q1487: any,
    @Query() _q1488: any,
    @Query() _q1489: any,
    @Query() _q1490: any,
    @Query() _q1491: any,
    @Query() _q1492: any,
    @Query() _q1493: any,
    @Query() _q1494: any,
    @Query() _q1495: any,
    @Query() _q1496: any,
    @Query() _q1497: any,
    @Query() _q1498: any,
    @Query() _q1499: any,
    @Query() _q1500: any,
    @Req() req: Request,
  ) {
    try {
      const route = (req?.baseUrl || req?.path || '/object') as string;
      const query: ListGraphicObjectsQuery = {
        pagination: {
          page: pagination.page,
          limit: pagination.limit,
          offset: pagination.offset,
        },
        sortBy: pagination.sortBy,
        sortOrder: pagination.sortOrder,
        search: pagination.q ?? q,
        route,
      };
      return await this.objects.list(query);
    } catch (error) {
      this.handleError(error);
    }
  }

  @Get(':id')
  @ApiOperation({ summary: 'Obtener objeto por ID' })
  @ApiParam({ name: 'id', description: 'UUID del objeto' })
  async findOne(@Param('id', ParseUUIDPipe) id: string) {
    try {
      const query: FindGraphicObjectQuery = { objectId: id };
      return await this.objects.findOne(query);
    } catch (error) {
      this.handleError(error);
    }
  }

  @Patch(':id')
  @UseGuards(JwtAuthGuard, PermissionsGuard)
  @Permissions('object:update')
  @ApiOperation({ summary: 'Actualizar objeto (permiso object:update)' })
  @ApiBearerAuth()
  @ApiParam({ name: 'id', description: 'UUID del objeto' })
  @ApiBody({ type: UpdateGraphicObjectDto })
  async update(
    @Param('id', ParseUUIDPipe) id: string,
    @Body() dto: UpdateGraphicObjectDto,
  ) {
    try {
      const command: UpdateGraphicObjectCommand = { objectId: id, ...dto };
      return await this.objects.update(command);
    } catch (error) {
      this.handleError(error);
    }
  }

  @Delete(':id')
  @UseGuards(JwtAuthGuard, PermissionsGuard)
  @Permissions('object:delete')
  @ApiOperation({ summary: 'Eliminar objeto (permiso object:delete)' })
  @ApiBearerAuth()
  @ApiParam({ name: 'id', description: 'UUID del objeto' })
  async remove(@Param('id', ParseUUIDPipe) id: string) {
    try {
      const command: DeleteGraphicObjectCommand = { objectId: id };
      return await this.objects.delete(command);
    } catch (error) {
      this.handleError(error);
    }
  }

  private handleError(error: unknown): never {
    if (error instanceof GraphicObjectNotFoundError) {
      throw new NotFoundException(error.message);
    }
    if (error instanceof InvalidGraphicObjectDataError) {
      throw new BadRequestException(error.message);
    }
    throw error as any;
  }
}
